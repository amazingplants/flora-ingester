generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["createMany"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model flora_taxa {
  id                       String             @id @default(dbgenerated("public.gen_random_uuid()")) @db.Uuid
  created_by_wfo_ingest_id String             @db.Uuid
  flora_taxa_names         flora_taxa_names[]

  @@index([id], name: "flora_taxa_id_idx")
}

model flora_taxa_names {
  flora_taxon_id String      @db.Uuid
  name_id        String      @db.Uuid
  status         name_status
  id             String      @id @default(dbgenerated("public.gen_random_uuid()")) @db.Uuid
  ingest_id      String      @db.Uuid
  flora_taxa     flora_taxa  @relation(fields: [flora_taxon_id], references: [id])
  names          names       @relation(fields: [name_id], references: [id])

  @@unique([flora_taxon_id, name_id, ingest_id], name: "flora_taxa_names_flora_taxon_id_name_id_idx")
  @@index([status], name: "flora_taxa_names_status_idx")
}

model names {
  id                       String             @id @default(dbgenerated("public.gen_random_uuid()")) @db.Uuid
  scientific_name          String
  name_according_to        String?
  name_published_in        String?
  name_published_in_year   Int?
  family                   String?
  genus                    String?
  subgenus                 String?
  specific_epithet         String?
  infraspecific_epithet    String?
  name_authorship          String?
  taxon_remarks            String?
  taxon_rank               String
  aggregate                String?
  microspecies             String?
  subspecies               String?
  variety                  String?
  subvariety               String?
  form                     String?
  subform                  Int?
  group                    String?
  cultivar                 String?
  base_id                  String?            @db.Uuid
  wfo_name_reference       String?
  created_by_wfo_ingest_id String?            @db.Uuid
  wfo_data                 Json?
  flora_taxa_names         flora_taxa_names[]

  @@index([base_id], name: "names_base_id_idx")
  @@index([family], name: "names_family_idx")
  @@index([genus], name: "names_genus_idx")
  @@index([scientific_name], name: "names_scientific_name_idx")
  @@index([wfo_data], name: "names_wfo_data_idx")
  @@index([wfo_name_reference], name: "names_wfo_name_reference_idx")
}

enum name_status {
  accepted
  synonym
  unknown
}
